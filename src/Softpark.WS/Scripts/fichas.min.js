(function(){var o,s,h,c,i,u,n,r,f,e,l,t;h=function(){function n(){var n;this.history=[];this.history.push(window.location.href);this.current=0;n=this;window.onpopstate=function(t){return n.pop(t)}}return n.prototype.navigate=function(n){var t;if(!n||n===void 0||n===null)throw new Error("Invalid Url Navigation");n=n.split("?")[0];t=this.history[this.current];t!==n&&(window.history.pushState({previous:{index:this.current,url:t},url:n},"",n),this.current=this.history.push(n)-1)},n.prototype.pop=function(){return window.location.reload()},n}();window.renderHtmlCell=function(n){return n};window.routes=new h;i=[];u=[];r=[];f=[];t=[];n=[];window.beginRequest=function(n,t){var e;return criaLoading("page-wrapper"),t.url.toLowerCase().indexOf("marcacao/associacao")>=0&&t.type.toLowerCase()==="post"&&(e={"X-Requested-With":"XMLHttpRequest",associacoes:i},t.data=jQuery.param(e),n.done(function(){return i=[],u=[]}).error(function(){return console.error(arguments,1)})),t.url.toLowerCase().indexOf("marcacao/download")>=0&&t.type.toLowerCase()==="post"&&(e={"X-Requested-With":"XMLHttpRequest",downloads:r},t.data=jQuery.param(e),n.done(function(){return r=[],f=[]}).error(function(){return console.error(arguments,1)})),n.complete(function(){return destroiLoading("page-wrapper")})};window.drawCallback=function(){var i,n,r;for($(".btn-create").remove(),n=0,r=draws.length;n<r;n++)i=draws[n],$(i.el).append(i.content);return t.length>0?$("#updateZon").removeClass("disabled").removeAttr("disabled"):$("#updateZon").addClass("disabled").attr("disabled",!0)};jQuery.ajaxPrefilter(function(n,t,i){return n.url==="ajax/default.asp"&&(n.url=t.url=""+appPath+"../"+n.url),n.url==="ajax/login/verificaSessao.asp"||n.url==="../_inc/ajax/login/verificaSessao.asp"?(n.url=t.url=""+appPath+"../"+n.url,i.done(function(n){if(!n.sessao)return modalAlerta("Sessão Expirada","Sua sessão expirou!"),setTimeout(function(){return window.location.assign(""+appPath+"../login.asp")},5e3)})):void 0});$(function(){var t,n;n=null;t=!1;window.ddlChange=function(){var i,r,u,f,e;this.value!==""&&(e=$(this).text(),r=e.split(" / "),u=r[0].trim(),i=r[1].split(" - ")[0].trim(),f=r[1].trim(),$(this).text(u).data({setor:{cnes:i,nome:f}}),t=!0,this.selected&&!n?(n=i,$("[name=unidadeCred]").val(i)):n!==i&&$(this).attr("disabled",!0),$("[name=unidadeCred]").trigger("change"),t=!1)};$("select#idMicroAreaUnidade option, select#ItemVinc option").each(ddlChange);$(document).on("change","[name=unidadeCred]",function(){var i;return i=$(this).val(),i===n||t||$("select#idMicroAreaUnidade, select#ItemVinc").val(""),n=i,$("select#idMicroAreaUnidade option, select#ItemVinc option").each(function(){var i,t;if(t=$(this).data("setor"),t)return i=t.cnes,n===i?$(this).removeAttr("disabled"):$(this).attr("disabled",!0)})})});e=[];window.criaLoading=function(n){var t,i;0!==$("#"+n).length&&(i=0>e.indexOf(n),i&&e.push(n),t='<div class="div-carregando" id="div-carregando-'+n+'">',t+='<div class="div-carregando-fundo"><\/div>',t+='<div class="div-carregando-conteudo">',t+='<img src="'+appPath+'../img/ajax-loader-2.gif" /><br>',t+="<span><b>Carregando...<\/b><\/span>",t+="<\/div>",t+="<\/div>",$("#div-carregando-"+n).length===0&&$("body").append(t),$("#div-carregando-"+n).css({display:"block",width:$("#"+n).css("width"),height:$("#"+n).css("height"),top:$("#"+n).offset().top,left:$("#"+n).offset().left}))};window.destroiLoading=function(n){var t,i;return t=$.extend([],[],e),i=t.splice(t.indexOf(n)),i.shift(),t=[].concat(t,i),e=t,$("#div-carregando-"+n).remove()};$(window).on("resize",function(){var n,t,r,i;for(i=[],t=0,r=e.length;t<r;t++)n=e[t],i.push($("#div-carregando-"+n).css({width:0,height:0,top:$("#"+n).offset().top,left:$("#"+n).offset().left}).css({width:$("#"+n).css("width"),height:$("#"+n).css("height"),top:$("#"+n).offset().top,left:$("#"+n).offset().left}));return i});c=function(){function n(n,t){this.MicroArea=n;this.Codigo=t}return n}();$(document).on("click","#updateZon",function(i){return i.preventDefault(),i.stopPropagation(),criaLoading("page-wrapper"),$("#updateZon").addClass("disabled").attr("disabled",!0),$.post(window.location.href+"/Edit",{zoneamentos:t}).always(function(){return destroiLoading("page-wrapper")}).done(function(i){return i===!0?(t=[],n=[],oTable.fnDraw()):console.error(arguments,0),t.length>0?$("#updateZon").removeClass("disabled").removeAttr("disabled"):$("#updateZon").addClass("disabled").attr("disabled",!0)}).error(function(){return console.error(arguments,1)})});$(document).on("change",".microArea",function(i){var r,u;return i.preventDefault(),i.stopPropagation(),r=+this.id,u=$(this).val(),u?0<=n.indexOf(r)?t[n.indexOf(r)].MicroArea=u:(n.push(r),t.push(new c(u,r))):0<=n.indexOf(r)&&(delete t[n.indexOf(r)],delete n[n.indexOf(r)],t=t.filter(function(n){return!!n}),n=n.filter(function(n){return!isNaN(n)})),t.length>0?$("#updateZon").removeClass("disabled").removeAttr("disabled"):$("#updateZon").addClass("disabled").attr("disabled",!0)});window.renderMaSelection=function(i,r,u){var f,e;return f=u.Codigo,e=$($("#tplMaSelection").html().replace("{codigo}",f)),setTimeout(function(){var r;return 0<=n.indexOf(f)&&(r=t[n.indexOf(f)],i=r.MicroArea),i?$("#"+f).val(i):void 0},100),e[0].outerHTML};o=function(){function n(){this.Codigo=0;this.Relacionar=!1}return n}();s=function(){function n(){this.Vinculo=0;this.Baixar=!1}return n}();l=function(n,t){var i;return((i=typeof n.Relacionar=="undefined")!=null?i:{x:n.Relacionar})+t.Relacionar};$(document).on("change",".chk_associar",function(n){var t,r;return n.preventDefault(),n.stopPropagation(),i.length===0&&u.length>0&&(u=[]),r=u.indexOf($(this).data("codigo")),r<0&&(r=i.length,t=new o,t.Codigo=$(this).data("codigo"),i.push(t),u.push($(this).data("codigo"))),t=i[r],t.Relacionar=this.checked,$("#btn_update_assoc").attr("disabled",!0).addClass("disabled"),i.length>0?$("#btn_update_assoc").removeAttr("disabled").removeClass("disabled"):void 0});window.renderVincSelection=function(n){var r,t;return t=u.indexOf($(this).data("codigo")),t>=0&&(r=i[t],r.Relacionar===!1?n=n.replace("checked",""):n.indexOf("checked")<0&&(n=n.replace("input ","input checked "))),$("#btn_update_assoc").attr("disabled",!0).addClass("disabled"),i.length>0&&$("#btn_update_assoc").removeAttr("disabled").removeClass("disabled"),n};window.renderDownSelection=function(n){var i,t;return t=f.indexOf($(this).data("vinculo")),t>=0&&(i=r[t],i.Baixar===!1?n=n.replace("checked",""):n.indexOf("checked")<0&&(n=n.replace("input ","input checked "))),$("#btn_update_download").attr("disabled",!0).addClass("disabled"),r.length>0&&$("#btn_update_download").removeAttr("disabled").removeClass("disabled"),n};$(document).on("change",".chk_download",function(n){var t,i;return n.preventDefault(),n.stopPropagation(),r.length===0&&f.length>0&&(f=[]),i=f.indexOf($(this).data("vinculo")),i<0&&(i=r.length,t=new s,t.Vinculo=$(this).data("vinculo"),r.push(t),f.push($(this).data("vinculo"))),t=r[i],t.Baixar=this.checked,$("#btn_update_download").attr("disabled",!0).addClass("disabled"),r.length>0?$("#btn_update_download").removeAttr("disabled").removeClass("disabled"):void 0})}).call(this);